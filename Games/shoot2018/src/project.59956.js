require=function o(c,s,r){function l(n,e){if(!s[n]){if(!c[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(u)return u(n,!0);var a=new Error("Cannot find module '"+n+"'");throw a.code="MODULE_NOT_FOUND",a}var i=s[n]={exports:{}};c[n][0].call(i.exports,function(e){var t=c[n][1][e];return l(t||e)},i,i.exports,o,c,s,r)}return s[n].exports}for(var u="function"==typeof require&&require,e=0;e<r.length;e++)l(r[e]);return l}({Net:[function(e,t,n){"use strict";cc._RF.push(t,"5ad20BV55tJU5IA/or7CcyN","Net");var a="asiangames/",c={userInfo:a+"user/info.do?openId=",updateInfo:a+"user/update.do?openId=",changePlayer:a+"character/change.do?openId=",buyPlayer:a+"character/buy.do?openId=",sign:"https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx4d0fecb7965c522a&redirect_uri=http%3A%2F%2Fpd.xinhua-news.cn%2Fxhweixin%2Foauth%2Fcb%2F1.do&response_type=code&scope=snsapi_userinfo&state=http%3A%2F%2Fpd.xinhua-news.cn%2Fgame%2Fshoot2018%2Findex.html#wechat_redirect",rank:a+"rank/list.do"},i=e("wx-share"),s=e("global");t.exports={ajax:function(e,t,n,a){t=-1<t.indexOf("?")?t+"&t="+(new Date).valueOf():t+"?t="+(new Date).valueOf();var i=cc.loader.getXMLHttpRequest(),o=n||function(e){console.log(e)};i.onreadystatechange=function(){if(4===i.readyState&&200<=i.status&&i.status<300){var e=JSON.parse(i.responseText);o(e)}},i.open(e,t,!0),i.timeout=Number(a)||5e3,i.send()},get:function(e,t,n){this.ajax("GET",e,t,n)},post:function(e,t,n){this.ajax("POST",e,t,n)},getCount:function(e){this.get(c.cnt,e)},getUserInfo:function(e,t){var n=c.userInfo+e;this.get(n,t)},setCoinAndScore:function(e,t,n){if(s.useSingle)s.userInfo.coin=t,s.userInfo.topScore=s.topScore,localStorage.setItem("userinfo",JSON.stringify(s.userInfo));else{var a=c.updateInfo+e+"&coin="+t+"&score="+n;this.get(a,function(e){0!=e.code&&console.error("setCoinAndScore failed:",e.msg)})}},setCoin:function(e,t){this.setCoinAndScore(e,t,"")},setScore:function(e,t){this.setCoinAndScore(e,"",t)},changePlayer:function(e,t,n){if(s.useSingle)s.userInfo.currentCharacter=t,localStorage.setItem("userinfo",JSON.stringify(s.userInfo)),n&&n({code:0});else{var a=c.changePlayer+e+"&character="+t,i=n||function(e){0!=e.code&&console.error("changePlayer failed:",e.msg)};this.get(a,i)}},buyPlayer:function(e,t,n,a,i){if(s.useSingle)s.userInfo.characterList.push(t),localStorage.setItem("userinfo",JSON.stringify(s.userInfo)),i&&i({code:0});else{var o=void 0;o=a?c.buyPlayer+e+"&character="+t+"&costCoin="+n+"&balance="+a:c.buyPlayer+e+"&character="+t+"&score="+n;this.get(o,i)}},buyHidePlayer:function(e,t,n){if(s.useSingle)s.userInfo.characterList.push(t),localStorage.setItem("userinfo",JSON.stringify(s.userInfo)),n&&n({code:0});else{var a=c.buyPlayer+e+"&character="+t+"&costCoin=0";this.get(a,n)}},getRank:function(e){this.get(c.rank,e)},gotoSign:function(){location.href=c.sign},share:function(e){if(!s.useSingle){var t=s.currentPlayer.en_full.replace("\n"," ")+"，属你最准！",n="http://pd.xinhua-news.cn/game/shoot2018/static/imgshare/share.png";e?i.updateOpt({title:e.title||"射击打靶",desc:e.desc||t,imgUrl:e.imgUrl||n,success:e.success||function(e){s.isShare=!0},cancel:function(){}}):i.updateOpt({title:"射击打靶",desc:t,imgUrl:n,success:function(){s.isShare=!0},cancel:function(){}})}},wbGetUid:function(){},wbOauth:function(){}},cc._RF.pop()},{global:"global","wx-share":"wx-share"}],change:[function(e,t,n){"use strict";cc._RF.push(t,"6e4bfjHTIhGcqb1RkpWgSKS","change");var u=e("Net"),d=e("global");cc.Class({extends:cc.Component,properties:{playerPrefab:cc.Prefab,scrollContent:cc.Node,obtainPanel:cc.Node,previewPanel:cc.Node,coinLayout:cc.Node,coinText:cc.RichText},onLoad:function(){this.obtainPanel.opacity=0,this.previewPanel.opacity=0,this.obtainPanel.zIndex=-1,this.previewPanel.zIndex=-1,this.coinLayout.zIndex=2,this.coinText.string="<color=#FFF12B><b>"+d.coin+"</b><color>",this.initScrollView()},initScrollView:function(){var l=this;this.scrollContent.removeAllChildren(),this.scrollContent.height=4950;var e=function(t){var e=cc.instantiate(l.playerPrefab),n=e.getChildByName("flag");n.getComponent(cc.Sprite).spriteFrame=t.flag,n.getChildByName("name").getComponent(cc.Label).string=t.en_full;var a=e.getChildByName("btns"),i=a.getChildByName("btn出战"),o=a.getChildByName("btn出战中"),c=a.getChildByName("btn购买");c.getChildByName("cost").getComponent(cc.Label).string=t.cost||2e3,t.cost>d.coin&&(c.getComponent(cc.Button).interactable=!1);var s=e.getChildByName("bg-select");t.en==d.currentPlayer.en?(s.opacity=255,l.selecBg=s,o.zIndex=1,l.selectBtnFighting=o,l.selectBtnFight=i):t.available&&(i.zIndex=1),e.playerName=t.en,e.previewPanel=l.previewPanel;var r=cc.instantiate(d.gunPrefabs[t.gun.index]);r.getChildByName("瞄准器").getChildByName("左右参数").opacity=0,e.gun=r,e.root=l,e.btnFight=i,c.on("click",l.showPreviewPanel,e),n.on("click",l.showPreviewPanel,e),i.on("click",function(e){l._isPanelShow||(d.setting.soundEffect&&cc.audioEngine.play(d.audios["国家选择确认"],!1,d.volume),l.selecBg.opacity=0,l.selectBtnFighting.zIndex=-1,l.selectBtnFight.zIndex=1,s.opacity=255,l.selecBg=s,i.zIndex=-1,o.zIndex=1,l.selectBtnFight=i,l.selectBtnFighting=o,d.currentPlayer=t,u.changePlayer(d.openId,d.currentPlayer.en))},l),o.on("click",l.onBtnBackToIndex_click,l),l.scrollContent.addChild(e)},t=!0,n=!1,a=void 0;try{for(var i,o=d.PLAYERS[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){e(i.value)}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}},start:function(){},showPreviewPanel:function(e){if(!this.root._isPanelShow){d.setting.soundEffect&&cc.audioEngine.play(d.audios["切换国家"],!1,d.volume),this.root._isPanelShow=!0;var t=this.playerName,n=d.PLAYERS[d.MAP[t]],a=this.previewPanel,i=a.getChildByName("flag"),o=i.getChildByName("name").getComponent(cc.Label),c=cc.find("btn购买/cost",a).getComponent(cc.Label),s=cc.find("参数/抖动/抖动",a).getComponent(cc.Label),r=cc.find("参数/后坐力/后座力",a).getComponent(cc.Label),l=a.getChildByName("容器");i.getComponent(cc.Sprite).spriteFrame=n.flag,o.string=n.en_full,c.string=n.cost||2e3,s.string=n.gun.shake,r.string=n.gun.blowback;var u=cc.find("btn购买",a).getComponent(cc.Button);n.available?u.node.opacity=0:u.node.opacity=255,n.cost>d.coin?u.interactable=!1:u.interactable=!0;var h=cc.find("瞄准器/左右参数/抖动/label",this.gun).color;cc.find("参数/抖动/label",a).color=h,cc.find("参数/后坐力/label",a).color=h,l.removeAllChildren(),l.addChild(this.gun),a.opacity=255,a.zIndex=1,this.root._player=n,this.root._color=h,this.root._gunNode=this.gun,this.root._btnFight=this.btnFight}},onBtnBack_click:function(e){d.setting.soundEffect&&cc.audioEngine.play(d.audios["切换国家"],!1,d.volume),this.previewPanel.opacity=0,this.previewPanel.zIndex=-1,this._isPanelShow=!1},coinAnim:function(e,t){var n=this,a=0,i=e/20,o=setInterval(function(){e<=a?clearInterval(o):(a+=i,t-=i,n.coinText.string="<color=#FFF12B><b>"+t+"</b><color>")},50);this.coinLayout.runAction(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1.25),cc.scaleTo(.1,1)))},onBtnBuy_click:function(e){var a=this;u.buyPlayer(d.openId,this._player.en,this._player.cost,d.coin-this._player.cost,function(e){if(0==e.code){d.setting.soundEffect&&cc.audioEngine.play(d.audios["购买"],!1,d.volume),a.coinAnim(a._player.cost,d.coin),d.coin-=a._player.cost,a.scrollViewBtnBuysAvailable(),a._player.available=!0,a._btnFight.zIndex=2;var t=a.obtainPanel,n=cc.find("容器",t);n.removeAllChildren(),n.addChild(cc.instantiate(a._gunNode)),cc.find("flag",t).getComponent(cc.Sprite).spriteFrame=a._player.flag,cc.find("flag/name",t).getComponent(cc.Label).string=a._player.en_full,a.previewPanel.opacity=0,a.obtainPanel.opacity=255,a.obtainPanel.zIndex=1,a.previewPanel.zIndex=-1}else cc.error("buy "+a._player.en,e.msg)})},setInfoText:function(e){this.infoText&&(this.infoText.string=e,this.infoText.node.runAction(cc.sequence(cc.fadeIn(0),cc.fadeOut(3))))},onBtnObtain_click:function(e){this.obtainPanel.opacity=0,this.obtainPanel.zIndex=-1,this._isPanelShow=!1},onBtnBackToIndex_click:function(e){this._isPanelShow||cc.director.loadScene("index")},scrollViewBtnBuysAvailable:function(){var e=!0,t=!1,n=void 0;try{for(var a,i=this.scrollContent.children[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value,c=cc.find("btns/btn购买",o).getComponent(cc.Button),s=o.playerName;d.PLAYERS[d.MAP[s]].cost>d.coin?c.interactable=!1:c.interactable=!0}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}}),cc._RF.pop()},{Net:"Net",global:"global"}],event:[function(e,t,n){"use strict";cc._RF.push(t,"c3403ssjcpDE58xkICfMByJ","event");var a=e("global"),i=e("Net");cc.Class({extends:cc.Component,properties:{},start:function(){},onStartGame:function(){var e=this;a.currentRound=1,a.totalScore=0,a.isRelived=!1,cc.director.loadScene("shoot");var t=void 0;setTimeout(function(){a.setting.soundEffect?(t=cc.audioEngine.play(a.audios["射击倒计时"],!1,a.volume),cc.audioEngine.setFinishCallback(t,function(){e.playBackgroundMusic()})):e.playBackgroundMusic()},500)},playBackgroundMusic:function(){a.setting.music&&(cc.audioEngine.stopAll(),a.shootBgAudioId=cc.audioEngine.play(a.audios["游戏进行中"],!0,a.volume))},onShare:function(e){a.setting.soundEffect&&cc.audioEngine.play(a.audios["切换国家"],!1,a.volume);var t=e.currentTarget.parent.parent.getChildByName("分享遮罩"),n=t.getChildByName("txt").getComponent(cc.Label);a.useSingle?t&&(n.string="分享到微信、微\n博体验完整游戏",t.opacity=255,t.zIndex=1):(i.share(),t&&(n.string="点击上方分享",t.opacity=255,t.zIndex=1))},onChangePlayer:function(){this._isOnChange||(this._isOnChange=!0,a.setting.soundEffect&&cc.audioEngine.play(a.audios["切换国家"],!1,a.volume),cc.director.loadScene("change"))},onBackToIndex:function(){a.setting.soundEffect&&cc.audioEngine.play(a.audios["切换国家"],!1,a.volume),cc.director.loadScene("index")},onRank:function(e){a.setting.soundEffect&&cc.audioEngine.play(a.audios["切换国家"],!1,a.volume),a.useSingle?this.onShare(e):cc.director.loadScene("rank")},onSetting:function(e){var t=e.currentTarget.getChildByName("Label").getComponent(cc.Label);a.setting.music?(t.string="音效：关",a.setting.music=!1,a.setting.soundEffect=!1):(t.string="音效：开",a.setting.music=!0,a.setting.soundEffect=!0)}}),cc._RF.pop()},{Net:"Net",global:"global"}],global:[function(e,t,n){"use strict";cc._RF.push(t,"244fc1MOSRGPZ9EJ9cTGSo2","global");t.exports={answerUrl:"./answer/answer.html",isWeixin:!0,browser:"",useSingle:!1,openId:null,userInfo:{},isPause:!1,isRelived:!1,targetScoreLeft:null,coin:0,totalScore:0,topScore:0,shootPage:cc.Node,sightBead:null,isShooting:!1,scoreNodes:[],currentTurn:0,currentRound:1,roundActions:[0,1],roundTargetScore:[38,38,38,38,36,36,36,36,36,34,34,34,34,34,36,36,36,36,36,38,38,38,38,38,40,40,40,40,40,41,41,41,41,41,42,42,42,42,42,43,43,43,43,43],defaultTargetScore:44,bigNumber:null,wind:{directionAngle:0,speed:0},distance:1,currentPlayer:null,gunPrefabs:null,PLAYERS:[{zh:"阿富汗",zh_full:"阿富汗",en:"AFG",en_full:"Afghanistan",gun:{index:11,shake:4,blowback:26},available:!1,availableWay:"coin",cost:300},{zh:"孟加拉",zh_full:"孟加拉国",en:"BAN",en_full:"Bangladesh",gun:{index:5,shake:3,blowback:33},available:!1,availableWay:"coin",cost:300},{zh:"不丹",zh_full:"不丹",en:"BHU",en_full:"Bhutan",gun:{index:10,shake:2,blowback:40},available:!1,availableWay:"coin",cost:300},{zh:"巴林",zh_full:"巴林",en:"BRN",en_full:"Bahrain",gun:{index:9,shake:2,blowback:41},available:!1,availableWay:"coin",cost:300},{zh:"文莱",zh_full:"文莱达鲁萨兰国",en:"BRU",en_full:"Brunei Darussalam",gun:{index:7,shake:2,blowback:41},available:!1,availableWay:"coin",cost:300},{zh:"柬埔寨",zh_full:"柬埔寨",en:"CAM",en_full:"Cambodia",gun:{index:8,shake:2,blowback:43},available:!1,availableWay:"coin",cost:300},{zh:"中国",zh_full:"中华人民共和国",en:"CHN",en_full:"China",gun:{index:0,shake:2,blowback:39},available:!0,availableWay:"free",cost:300},{zh:"中国香港",zh_full:"中华人民共和国香港特别行政区",en:"HKG",en_full:"Hong Kong, China",gun:{index:11,shake:4,blowback:26},available:!1,availableWay:"coin",cost:300},{zh:"独立的亚洲运动员",zh_full:"独立的亚洲运动员",en:"IAA",en_full:"INDEPENDENT\nASIAN ATHLETE",gun:{index:7,shake:2,blowback:43},available:!1,availableWay:"coin",cost:300},{zh:"印度尼西亚",zh_full:"印度尼西亚",en:"INA",en_full:"Indonesia",gun:{index:1,shake:3,blowback:36},available:!1,availableWay:"coin",cost:300},{zh:"印度",zh_full:"印度",en:"IND",en_full:"India",gun:{index:2,shake:3,blowback:31},available:!1,availableWay:"coin",cost:300},{zh:"伊朗",zh_full:"伊朗",en:"IRI",en_full:"IR Iran",gun:{index:7,shake:3,blowback:30},available:!1,availableWay:"coin",cost:300},{zh:"伊拉克",zh_full:"伊拉克",en:"IRQ",en_full:"Iraq",gun:{index:8,shake:2,blowback:43},available:!1,availableWay:"coin",cost:300},{zh:"约旦",zh_full:"约旦",en:"JOR",en_full:"Jordan",gun:{index:4,shake:4,blowback:26},available:!1,availableWay:"coin",cost:300},{zh:"日本",zh_full:"日本",en:"JPN",en_full:"Japan",gun:{index:9,shake:4,blowback:28},available:!1,availableWay:"coin",cost:300},{zh:"哈萨克斯坦",zh_full:"哈萨克斯坦",en:"KAZ",en_full:"Kazakhstan",gun:{index:2,shake:2,blowback:44},available:!1,availableWay:"coin",cost:300},{zh:"吉尔吉斯斯坦",zh_full:"吉尔吉斯斯坦",en:"KGZ",en_full:"Kyrgyzstan",gun:{index:6,shake:3,blowback:35},available:!1,availableWay:"coin",cost:300},{zh:"韩国",zh_full:"韩国",en:"KOR",en_full:"Korea",gun:{index:1,shake:2,blowback:40},available:!1,availableWay:"coin",cost:300},{zh:"沙特阿拉伯",zh_full:"沙特阿拉伯王国",en:"KSA",en_full:"Kingdom of Saudi\nArabia",gun:{index:1,shake:2,blowback:45},available:!1,availableWay:"coin",cost:300},{zh:"老挝",zh_full:"老挝人民民主共和国",en:"LAO",en_full:"Lao PDR",gun:{index:2,shake:3,blowback:33},available:!1,availableWay:"coin",cost:300},{zh:"黎巴嫩",zh_full:"黎巴嫩",en:"LBN",en_full:"Lebanon",gun:{index:7,shake:3,blowback:33},available:!1,availableWay:"coin",cost:300},{zh:"中国澳门",zh_full:"中华人民共和国澳门特别行政区",en:"MAC",en_full:"Macau, China",gun:{index:5,shake:2,blowback:45},available:!1,availableWay:"coin",cost:300},{zh:"马来西亚",zh_full:"马来西亚",en:"MAS",en_full:"Malaysia",gun:{index:4,shake:4,blowback:26},available:!1,availableWay:"coin",cost:300},{zh:"马尔代夫",zh_full:"马尔代夫",en:"MDV",en_full:"Maldives",gun:{index:1,shake:3,blowback:32},available:!1,availableWay:"coin",cost:300},{zh:"蒙古",zh_full:"蒙古",en:"MGL",en_full:"Mongolia",gun:{index:0,shake:3,blowback:37},available:!1,availableWay:"coin",cost:300},{zh:"缅甸",zh_full:"缅甸",en:"MYA",en_full:"Myanmar",gun:{index:4,shake:3,blowback:30},available:!1,availableWay:"coin",cost:300},{zh:"尼泊尔",zh_full:"尼泊尔",en:"NEP",en_full:"Nepal",gun:{index:5,shake:3,blowback:31},available:!1,availableWay:"coin",cost:300},{zh:"阿曼",zh_full:"阿曼",en:"OMA",en_full:"Oman",gun:{index:6,shake:3,blowback:35},available:!1,availableWay:"coin",cost:300},{zh:"巴基斯坦",zh_full:"巴基斯坦",en:"PAK",en_full:"Pakistan",gun:{index:0,shake:2,blowback:41},available:!1,availableWay:"coin",cost:300},{zh:"菲律宾",zh_full:"菲律宾",en:"PHI",en_full:"Philippines",gun:{index:6,shake:2,blowback:39},available:!1,availableWay:"coin",cost:300},{zh:"巴勒斯坦",zh_full:"巴勒斯坦",en:"PLE",en_full:"Palestine",gun:{index:8,shake:3,blowback:31},available:!1,availableWay:"coin",cost:300},{zh:"朝鲜",zh_full:"朝鲜民主主义人民共和国",en:"PRK",en_full:"DPR Korea",gun:{index:2,shake:2,blowback:40},available:!1,availableWay:"coin",cost:300},{zh:"卡塔尔",zh_full:"卡塔尔",en:"QAT",en_full:"Qatar",gun:{index:5,shake:3,blowback:36},available:!1,availableWay:"coin",cost:300},{zh:"新加坡",zh_full:"新加坡",en:"SGP",en_full:"Singapore",gun:{index:3,shake:4,blowback:25},available:!1,availableWay:"coin",cost:300},{zh:"斯里兰卡",zh_full:"斯里兰卡",en:"SRI",en_full:"Sri Lanka",gun:{index:9,shake:3,blowback:32},available:!1,availableWay:"coin",cost:300},{zh:"叙利亚",zh_full:"叙利亚",en:"SYR",en_full:"Syiria",gun:{index:10,shake:2,blowback:41},available:!1,availableWay:"coin",cost:300},{zh:"泰国",zh_full:"泰国",en:"THA",en_full:"Thailand",gun:{index:11,shake:2,blowback:42},available:!1,availableWay:"coin",cost:300},{zh:"塔吉克斯坦",zh_full:"塔吉克斯坦",en:"TJK",en_full:"Tajikistan",gun:{index:4,shake:2,blowback:42},available:!1,availableWay:"coin",cost:300},{zh:"土库曼斯坦",zh_full:"土库曼斯坦",en:"TKM",en_full:"Turkmenistan",gun:{index:0,shake:2,blowback:38},available:!1,availableWay:"coin",cost:300},{zh:"东帝汶",zh_full:"东帝汶",en:"TLS",en_full:"Timor Leste",gun:{index:10,shake:2,blowback:39},available:!1,availableWay:"coin",cost:300},{zh:"中国台北",zh_full:"中国台北",en:"TPE",en_full:"Chinese Taipei",gun:{index:3,shake:2,blowback:38},available:!1,availableWay:"coin",cost:300},{zh:"阿联酋",zh_full:"阿拉伯联合酋长国",en:"UAE",en_full:"United Arab Emirates",gun:{index:6,shake:2,blowback:43},available:!1,availableWay:"coin",cost:300},{zh:"乌兹别克斯坦",zh_full:"乌兹别克斯坦",en:"UZB",en_full:"Uzbekistan",gun:{index:11,shake:4,blowback:26},available:!1,availableWay:"coin",cost:300},{zh:"越南",zh_full:"越南",en:"VIE",en_full:"Vietnam",gun:{index:3,shake:3,blowback:32},available:!1,availableWay:"coin",cost:300},{zh:"也门",zh_full:"也门",en:"YEM",en_full:"Yemen",gun:{index:3,shake:3,blowback:30},available:!1,availableWay:"coin",cost:300}],MAP:{AFG:0,"阿富汗":0,BAN:1,"孟加拉":1,BHU:2,"不丹":2,BRN:3,"巴林":3,BRU:4,"文莱":4,CAM:5,"柬埔寨":5,CHN:6,"中国":6,HKG:7,"中国香港":7,IAA:8,"独立的亚洲运动员":8,INA:9,"印度尼西亚":9,IND:10,"印度":10,IRI:11,"伊朗":11,IRQ:12,"伊拉克":12,JOR:13,"约旦":13,JPN:14,"日本":14,KAZ:15,"哈萨克斯坦":15,KGZ:16,"吉尔吉斯斯坦":16,KOR:17,"韩国":17,KSA:18,"沙特阿拉伯":18,LAO:19,"老挝":19,LBN:20,"黎巴嫩":20,MAC:21,"中国澳门":21,MAS:22,"马来西亚":22,MDV:23,"马尔代夫":23,MGL:24,"蒙古":24,MYA:25,"缅甸":25,NEP:26,"尼泊尔":26,OMA:27,"阿曼":27,PAK:28,"巴基斯坦":28,PHI:29,"菲律宾":29,PLE:30,"巴勒斯坦":30,PRK:31,"朝鲜":31,QAT:32,"卡塔尔":32,SGP:33,"新加坡":33,SRI:34,"斯里兰卡":34,SYR:35,"叙利亚":35,THA:36,"泰国":36,TJK:37,"塔吉克斯坦":37,TKM:38,"土库曼斯坦":38,TLS:39,"东帝汶":39,TPE:40,"中国台北":40,UAE:41,"阿联酋":41,UZB:42,"乌兹别克斯坦":42,VIE:43,"越南":43,YEM:44,"也门":44},isLoaded:!1,audios:{},volume:1,shootBgAudioId:null,setting:{music:!0,soundEffect:!0,shake:!1}},cc._RF.pop()},{}],index:[function(e,t,n){"use strict";cc._RF.push(t,"efce0JvwwhHoYyQM6I6SXcA","index");var a=e("wx-share"),i=e("Net"),h=e("global");cc.Class({extends:cc.Component,properties:{coinText:cc.RichText,topScoreLabel:cc.Label,gunPrefabs:[cc.Prefab],flag:cc.Sprite,shareBg:cc.Node,audios:[cc.AudioClip]},__preload:function(){var e=navigator.userAgent.toLowerCase();console.log("ua:",e),h.isWeixin=-1!=e.indexOf("micromessenger"),h.isWeixin?(h.useSingle=!1,h.browser="weixin"):(h.useSingle=!0,-1!=e.indexOf("weibo")?(h.browser="weibo",h.useSingle=!1):-1!=e.indexOf("qq")&&(h.browser="qq"))},onLoad:function(){var u=this;cc.audioEngine.stopAll(),h.currentPlayer||(h.currentPlayer=h.PLAYERS[h.MAP.CHN]),h.isWeixin&&(new a,i.share()),h.isLoaded||(h.useSingle?this.initSingle():this.initNet(),cc.loader.loadRes("flag",cc.SpriteAtlas,function(e,t){var n=t.getSpriteFrames(),a=!0,i=!1,o=void 0;try{for(var c,s=n[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var r=c.value,l=h.MAP[r.name];h.PLAYERS[l].flag=r}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}h.isLoaded=!0,u.flag.spriteFrame=h.currentPlayer.flag})),this.coinText.string="<color=#FFF12B><b>"+h.coin+"</b></color>",this.topScoreLabel.string="最高分："+h.topScore,h.gunPrefabs=this.gunPrefabs,h.currentPlayer.flag&&(this.flag.spriteFrame=h.currentPlayer.flag);var e=this.audios,t=h.audios;t["游戏进行中"]=e[0],t["射击倒计时"]=e[1],t["中靶"]=e[2],t["脱靶"]=e[3],t["8秒警告"]=e[4],t["切换国家"]=e[5],t["国家选择确认"]=e[6],t["购买"]=e[7],h.setting.music?cc.find("按钮event/设置/Label",this.node).getComponent(cc.Label).string="音效：开":cc.find("按钮event/设置/Label",this.node).getComponent(cc.Label).string="音效：关",this.shareBg.opacity=0,this.shareBg.zIndex=-1,this.shareBg.on(cc.Node.EventType.TOUCH_END,function(e){u.shareBg.opacity=0,u.shareBg.zIndex=-1})},start:function(){},GetQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},initSingle:function(){var e=localStorage.getItem("userinfo"),t=JSON.parse(e);t&&"shooting"==t.game?h.userInfo=t:h.userInfo={game:"shooting",characterList:["CHN"],currentCharacter:"CHN",coin:0,topScore:0,firstLogin:1,loginDays:0,lastLoginDate:""};var n=(new Date).toISOString().substr(0,10);n>h.userInfo.lastLoginDate&&(h.userInfo.loginDays+=1,h.userInfo.lastLoginDate=n),h.coin=h.userInfo.coin,h.topScore=h.userInfo.topScore;var a=!0,i=!1,o=void 0;try{for(var c,s=h.PLAYERS[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){c.value.available=!0}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}h.playerNumber=h.userInfo.characterList.length,h.currentPlayer=h.PLAYERS[h.MAP[h.userInfo.currentCharacter]]},initNet:function(){var n=this;h.openId=this.GetQueryString("openid"),h.openId?i.getUserInfo(h.openId,function(e){h.userInfo=e,h.coin=e.coin,h.topScore=e.topScore;var t=h.MAP[e.currentCharacter]||"CHN";h.currentPlayer=h.PLAYERS[t],n.coinText.string="<color=#FFF12B><b>"+h.coin+"</b></color>",n.topScoreLabel.string="最高分："+h.topScore,e.characterList.forEach(function(e){h.PLAYERS[h.MAP[e]]&&(h.PLAYERS[h.MAP[e]].available=!0)}),h.playerNumber=e.characterList.length,h.currentPlayer.flag&&(n.flag.spriteFrame=h.currentPlayer.flag)}):console.log("没有Id")}}),cc._RF.pop()},{Net:"Net",global:"global","wx-share":"wx-share"}],rank:[function(e,t,n){"use strict";cc._RF.push(t,"0b03cfp99lAjI31BdHJpyBt","rank");var i=e("Net");e("global");cc.Class({extends:cc.Component,properties:{rankPrefab:cc.Prefab,content:cc.Node},onLoad:function(){var n=this;this.content.removeAllChildren();var a=(new Date).valueOf();i.getRank(function(e){var t=(new Date).valueOf();console.log("rank 传输耗时：",t-a),n.callback(e)})},start:function(){},callback:function(a){var i=this,o=a.length,e=(new Date).valueOf(),c=16;o<c&&(c=o);for(var t=0;t<c;t++){var n=a[t],s=cc.instantiate(this.rankPrefab);this.setOneRank(t,s,n),this.content.addChild(s)}var r=(new Date).valueOf();console.log("add "+c+" items 耗时：",r-e),0<o-c&&this.scheduleOnce(function(){for(var e=c;e<o;e++){var t=a[e],n=cc.instantiate(i.rankPrefab);i.setOneRank(e,n,t),i.content.addChild(n)}},1)},setOneRank:function(e,t,n){var a=t.getChildByName("排名").getComponent(cc.Label),i=t.getChildByName("名字").getComponent(cc.Label),o=t.getChildByName("得分").getComponent(cc.Label),c=t.getChildByName("头像遮罩").getChildByName("头像").getComponent(cc.Sprite);a.string=e+1,i.string=n.name,o.string=n.score;var s=n.imgurl;if(s){var r="png";/^http:\/\/[\w\d]+\.sinaimg\.cn\/.*\.jpg$/.test(s)&&(r="jpg",s=n.imgurl.replace(/http:\/\/[\w\d]+\.sinaimg\.cn/,"/wbheadimg")),cc.loader.load({url:s,type:r},function(e,t){var n=new cc.SpriteFrame(t);c.spriteFrame=n})}}}),cc._RF.pop()},{Net:"Net",global:"global"}],ring:[function(e,t,n){"use strict";cc._RF.push(t,"6fba41b0mRIRL40wj+dW0n1","ring");var s=e("global");cc.Class({extends:cc.Component,properties:{},start:function(){},onCollisionEnter:function(e,t){if(s.isShooting&&s.currentTurn<=5){if(5<=s.currentTurn&&(s.isPause=!0),0==t.tag){s.setting.soundEffect&&cc.audioEngine.play(s.audios["脱靶"],!1,s.volume);var n=e.node.parent.parent,a=cc.instantiate(e.node),i=a.getPosition(),o=e.node.parent.convertToWorldSpaceAR(i),c=n.convertToNodeSpaceAR(o);a.scale=.5,a.setPosition(c),n.getChildByName("bg").addChild(a),e.node.runAction(cc.removeSelf())}else s.setting.soundEffect&&cc.audioEngine.play(s.audios["中靶"],!1,s.volume);s.scoreNodes[s.currentTurn-1].string=t.tag,s.totalScore+=Number(t.tag),s.sightBead.emit("shoot",t.tag),this.showBigNumber(t.tag),s.isShooting=!1}},showBigNumber:function(e){"0"==e&&(e=":;"),s.bigNumber.getComponent(cc.Label).string=e,s.bigNumber.opacity=127.5,s.bigNumber.scale=.5;var t=cc.fadeTo(.3,255),n=cc.sequence(cc.scaleTo(.24,1.2),cc.scaleTo(.06,1)),a=cc.spawn(t,n);s.bigNumber.runAction(a),this.scheduleOnce(function(){s.bigNumber.opacity=0,5==s.currentTurn&&s.shootPage.emit("shootFinished")},.5)},onCollisionStay:function(e,t){},onCollisionExit:function(){}}),cc._RF.pop()},{global:"global"}],shoot:[function(e,t,n){"use strict";cc._RF.push(t,"4df60KN1jZFXY0ZhcTjbjRu","shoot");var a=e("Net"),r=e("global");cc.Class({extends:cc.Component,properties:{target:cc.Node,target0:cc.Node,sightBead:cc.Node,shotHole:cc.Prefab,btnMove:cc.Node,btnShoot:cc.Node,progressCD:cc.ProgressBar,camera:cc.Node,targetScore:cc.Label,scoreNodes:[cc.Label],countdownText:cc.Label,_acc:null,_duration:null,_interval:null,_range:cc.v2(0,0),pauseAndFinishPannel:cc.Node,coinText:cc.RichText,scoreLabel:cc.Label,pauseGroup:cc.Node,finishGroup:cc.Node,coinBonusText:cc.RichText,topScoreNode:cc.Node,btnRelive:cc.Node,nextRoundPannel:cc.Node,nextCountdown:cc.Label,webview:cc.Node,tipPannel:cc.Node},onLoad:function(){var t=this;this.webview.getComponent(cc.WebView).url=r.answerUrl,r.wind.directionAngle=Math.floor(360*Math.random()),r.wind.speed=Math.floor(20*Math.random())/10,0==r.wind.speed&&(r.wind.directionAngle=0);var e=this.node.getChildByName("准星容器");e.removeAllChildren();var n=r.gunPrefabs[r.currentPlayer.gun.index],a=cc.instantiate(n);this.sightBead=a.getChildByName("瞄准器"),this.gunNode=a,e.addChild(a),this.shakeCoefficient=10*r.currentPlayer.gun.shake,this.node.getChildByName("旗子").getComponent(cc.Sprite).spriteFrame=r.currentPlayer.flag;cc.fadeTo(0,76);var i=cc.fadeTo(.5,153),o=cc.fadeTo(.5,76);this.seq=cc.repeatForever(cc.sequence(i,o)),this.webview.removeFromParent(),cc.director.setDisplayStats(!1);var c=cc.view.getVisibleSize();this._range.x=c.width/2-this.target.width/5,this._range.y=c.height/2-this.target.height/2,r.bigNumber=this.node.getChildByName("环数大数字"),r.bigNumber.getComponent(cc.Label).string="",this.targetScore.string=r.roundTargetScore[r.currentRound]||r.defaultTargetScore,r.targetScoreLeft=this.targetScore,r.scoreNodes=this.scoreNodes,r.sightBead=this.sightBead,r.shootPage=this.node,r.currentTurn=0,r.isPause=!0,cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().attachDebugDrawToCamera(this.camera),this._acc={x:0,y:0,z:0},this._duration=.16,this._interval=0,this.starMoving=!1,this.sightBeadPos=cc.p(0,0),this.starMoveFinished=cc.callFunc(function(e){t.starMoving=!1})},start:function(){var e=this;if(1==r.currentRound){this.btnShoot.getComponent(cc.Button).interactable=!1;var t=3;r.bigNumber.getComponent(cc.Label).string=t--,this.schedule(function(){0==t?(r.bigNumber.getComponent(cc.Label).string="",r.isPause=!1,e.btnShoot.getComponent(cc.Button).interactable=!0,e.initEvent(),e.countdown()):r.bigNumber.getComponent(cc.Label).string=t--},1,2)}else r.isPause=!1,this.initEvent(),this.countdown()},update:function(e){if(!r.isPause&&(this._interval+=e,.05<this._interval&&0==this.starMoving)){this.starMoving=!0;var t=cc.pAdd(this.sightBeadPos,cc.p(this._acc.x*this.shakeCoefficient,this._acc.y*this.shakeCoefficient));t=cc.pClamp(t,cc.p(-130,-250),cc.p(130,250));var n=cc.sequence(cc.moveTo(this.duration,t),this.starMoveFinished);this.sightBead.runAction(n),this._interval=0}},playBackgroundMusic:function(){r.setting.music&&(null!=r.shootBgAudioId?cc.audioEngine.resume(r.shootBgAudioId):r.shootBgAudioId=cc.audioEngine.play(r.audios["游戏进行中"],!0,r.volume))},playCountDownSound:function(){r.setting.soundEffect&&(this.soundId=cc.audioEngine.play(r.audios["射击倒计时"],!1,r.volume))},play8sWarnSound:function(){cc.audioEngine.setVolume(r.shootBgAudioId,.5);var e=r.setting.soundEffect&&cc.audioEngine.play(r.audios["8秒警告"],!1,r.volume);this.warnAid=e,cc.audioEngine.setFinishCallback(e,function(){cc.audioEngine.setVolume(r.shootBgAudioId,1)})},onDestroy:function(){this.webview.destroy(),this.warnAid&&cc.audioEngine.stop(this.warnAid),clearInterval(this.tm)},initEvent:function(){var t=this;this.btnMove.on(cc.Node.EventType.TOUCH_MOVE,this.onBtnMove_touchMove,this),this.btnMove.on(cc.Node.EventType.TOUCH_END,function(e){t.btnMove.x=0,t.btnMove.y=0},this),this.btnMove.on(cc.Node.EventType.TOUCH_CANCEL,function(e){t.btnMove.x=0,t.btnMove.y=0},this),this.setSightBeadShake(),this.node.on("shootFinished",function(e){"0"==r.targetScoreLeft.string?(t.pauseGame(),t.nextRoundPannel.opacity=255,t.nextRoundPannel.zIndex=2,t.playCountDownSound(),t.nextRoundPannel.getComponent(cc.Sprite).schedule(function(){var e=Number(t.nextCountdown.string)-1;0==(t.nextCountdown.string=e)&&t.onBtnNextRound_click(null)},1,2)):t.gameFinish()},this)},setSightBeadShake:function(){var t=this;window.addEventListener("devicemotion",function(e){t._acc=e.acceleration},!0)},vibrate:function(e){navigator.vibrate?navigator.vibrate(e):navigator.webkitVibrate&&navigator.webkitVibrate(e)},countdown:function(){var e=this;this.countdownText.string=30,this._counter=30,this.schedule(function(){e._counter-=1,e.countdownText.string=e._counter,8==e._counter&&(e.play8sWarnSound(),e.tipPannel.opacity=76,e.tipPannel.runAction(e.seq)),0==e._counter&&e.node.emit("shootFinished")},1,29)},pauseGame:function(){r.isPause=!0,cc.director.getScheduler().pauseTarget(this),this.btnShoot.getComponent(cc.Button).interactable=!1,this.btnMove.getComponent(cc.Button).interactable=!1,cc.audioEngine.pause(this.warnAid),cc.audioEngine.pause(this.soundId),cc.audioEngine.setVolume(r.shootBgAudioId,.5)},resumeGame:function(){r.isPause=!1,cc.director.getScheduler().resumeTarget(this),this.btnShoot.getComponent(cc.Button).interactable=!0,this.btnMove.getComponent(cc.Button).interactable=!0,cc.audioEngine.resume(this.warnAid),cc.audioEngine.resume(this.soundId),cc.audioEngine.setVolume(r.shootBgAudioId,1)},onBtnPause_click:function(e){r.isPause||(this.pauseGame(),this.pauseAndFinishPannel.opacity=255,this.finishGroup.zIndex=-1,this.finishGroup.opacity=0,this.pauseGroup.opacity=255,this.coinText.string="<color=#FFF12B><b>"+r.coin+"</b></color>",this.scoreLabel.string=r.totalScore)},onBtnMove_touchMove:function(e){r.isPause||(this.camera.x+=e.getDelta().x,this.camera.y+=e.getDelta().y,this.camera.x=cc.clampf(this.camera.x,-this._range.x,this._range.x),this.camera.y=cc.clampf(this.camera.y,-this._range.y,this._range.y),this.btnMove.x+=e.getDelta().x,this.btnMove.x=cc.clampf(this.btnMove.x,-76,76),this.btnMove.y+=e.getDelta().y,this.btnMove.y=cc.clampf(this.btnMove.y,-76,76))},onBtnShoot_click:function(e){if(5<=r.currentTurn||r.isPause||r.isShooting)5==r.currentTurn&&(r.currentTurn+=1);else{r.isShooting=!0,r.currentTurn+=1,this.btnShoot.getComponent(cc.Button).interactable=!1;var t=cc.instantiate(this.shotHole),n=this.calcHolePos();t.setPosition(n),this.target0.addChild(t),this.renderBlowback(),this.shootCD()}},shootCD:function(){var e=this;this.progressCD.progress=1,this.tm=setInterval(function(){e.progressCD.progress-=.02,e.progressCD.progress<1e-6&&!r.isShooting&&!r.isPause&&(clearInterval(e.tm),e.btnShoot.getComponent(cc.Button).interactable=!0)},10)},calcHolePos:function(){var e=this.sightBead.getPosition(),t=cc.pAdd(e,this.camera.getPosition()),n=this.node.convertToWorldSpaceAR(t),a=this.target0.convertToNodeSpaceAR(n),i=.017453293,o=r.wind.speed*r.distance*10,c=360-r.wind.directionAngle,s=cc.v2({x:o*Math.cos(c*i),y:o*Math.sin(c*i)});return cc.pAdd(a,s)},renderBlowback:function(){var e=r.currentPlayer.gun.blowback;this.starMoving=!0,cc.pAddIn(this.sightBeadPos,cc.p(0,e/2));var t=cc.sequence(cc.spawn(cc.moveBy(.1,cc.p(0,e)),cc.scaleTo(.1,1.02)),cc.spawn(cc.moveBy(.1,cc.p(0,-e/4)),cc.scaleTo(.1,1)),cc.spawn(cc.moveBy(.3,cc.p(0,-e/4)),cc.scaleTo(.3,1)),this.starMoveFinished);this.sightBead.stopAllActions(),this.sightBead.runAction(t)},onBtnNextRound_click:function(e){cc.audioEngine.stop(this.soundId),r.currentRound+=1,cc.director.loadScene("shoot")},onBtnContinue_click:function(e){this.resumeGame(),this.pauseAndFinishPannel.opacity=0},onBtnBackToIndex_click:function(e){this.isFinished&&(cc.audioEngine.stopAll(),cc.director.loadScene("index"))},onBtnBack2:function(e){r.isPause&&(cc.audioEngine.stopAll(),cc.director.loadScene("index"))},onBtnRelive_click:function(e){var t=this;this.isFinished&&(r.isRelived=!0,window.fun=function(e){!0===e?(r.coin=t.pre_coin,r.currentRound+=1,cc.director.loadScene("shoot")):cc.director.loadScene("index")},this.webview.getComponent(cc.WebView).evaluateJS("init()"))},gameFinish:function(){this.pauseGame(),this.isFinished=!0,this.pauseAndFinishPannel.opacity=255,this.finishGroup.zIndex=0,this.pauseGroup.opacity=0,this.finishGroup.opacity=255,this.scoreLabel.string=r.totalScore;var e=Math.floor(r.totalScore/10);this.coinBonusText.string="<b>"+e+"</b>",this.pre_coin=r.coin,r.coin+=e,this.coinText.string="<color=#FFF12B><b>"+r.coin+"</b></color>",r.totalScore>r.topScore?(r.topScore=r.totalScore,this.topScoreNode.opacity=255):this.topScoreNode.opacity=0,r.isRelived?(this.btnRelive.getComponent(cc.Button).interactable=!1,this.btnRelive.opacity=0):(this.btnRelive.getComponent(cc.Button).interactable=!0,this.btnRelive.opacity=255),a.setCoinAndScore(r.openId,r.coin,r.totalScore)}}),cc._RF.pop()},{Net:"Net",global:"global"}],sightBead:[function(e,t,n){"use strict";cc._RF.push(t,"65fd5CPAtxII6wxzDuZvD0l","sightBead");var a=e("global");cc.Class({extends:cc.Component,properties:{showScore:!1,targetLabel:cc.Label,scoreLabels:[cc.Label],_score:0,score:cc.Label,roundLabel:cc.Label,windPoint:cc.Node,windSpeedLabel:cc.Label,shakeLabel:cc.Label,blowbackLabel:cc.Label},onLoad:function(){this.init()},init:function(){this.roundLabel.string=a.currentRound,this.score.string=a.totalScore,this.windSpeedLabel.string=a.wind.speed,0!=a.wind.speed&&(this.windPoint.rotation=a.wind.directionAngle),this.shakeLabel.string=a.currentPlayer.gun.shake,this.blowbackLabel.string=a.currentPlayer.gun.blowback,this._score=0,this.node.on("shoot",this.onShoot,this)},start:function(){},onShoot:function(e){this._score+=e.detail;var t=(a.roundTargetScore[a.currentRound]||a.defaultTargetScore)-this._score;if(a.targetScoreLeft.string=t<0?0:t,this.score.string=a.totalScore,this.showScore){var n=this.scoreLabels[a.currentTurn-1];n&&(n.string=e.detail+"环")}}}),cc._RF.pop()},{global:"global"}],target:[function(e,t,n){"use strict";cc._RF.push(t,"c336b81kvdO5pjxHkn9wJi7","target");var c=e("global");cc.Class({extends:cc.Component,properties:{},onLoad:function(){switch(this.angle=0,this.r=100,this.rov=100,this.t=0,this.reverseFlag=!0,c.distance=1,this.action=null,c.currentRound){case 1:break;case 2:case 3:case 4:this.setRandomAction(2,6,2);break;case 5:case 6:case 7:case 8:case 9:this.zoom(.7),this.setRandomAction(7,16,7);break;default:this.zoom(.7),this.setRandomAction(7,16,c.currentRound-2)}},start:function(){},update:function(e){c.isPause||(this.action&&this.action(e,this.node),9<c.currentRound&&this.zoomAction2(e,this.node))},zoom:function(e){this.node.scale=e,c.distance=1/e},getRandom:function(e,t,n){var a=void 0,i=void 0;do{i=!1,a=Math.floor(Math.random()*(t+1-e))+e;for(var o=n;o<c.currentRound;o++){c.roundActions[o]!==a||(i=!0)}}while(i);return c.roundActions[c.currentRound]=a},setRandomAction:function(e,t,n){var a=null;switch(this.getRandom(e,t,n)){case 1:break;case 2:a=this.zoomAction;break;case 3:a=this.updownAction;break;case 4:a=this.leftrightAction;break;case 5:a=this.leftSkewAction;break;case 6:a=this.rightSkewAction;break;case 7:a=this.circleAction;break;case 8:this.node.x=0,this.node.y=200,this.action=this.squareAction,a=this.circleAction;break;case 9:a=this.triangleAction;break;case 10:a=this.invertedTriangleAction;break;case 11:this.node.x=0,this.node.y=200,a=this.diamondAction;break;case 12:this.node.x=0,this.node.y=200,a=this.reverseDiamondAction;break;case 13:a=this.ellipseUdAction;break;case 14:a=this.ellipseLrAction;break;case 15:this.minAngle=7*Math.PI/6,this.maxAngle=11*Math.PI/6,this.angle=3*Math.PI/2,a=this.pendulumAction;break;default:a=this.spiralAction}this.action=a},zoomAction:function(){this.zoom(.5)},zoomAction2:function(e,t){var n=this;if(!this.pauseZoom){var a=void 0;a=this.scaleFlag?t.scale+e/5:t.scale-e/5,a=cc.clampf(a,.6,.8),this.zoom(a),.6!=a&&.8!=a||(this.scaleFlag=!this.scaleFlag,this.pauseZoom=!0,this.scheduleOnce(function(){n.pauseZoom=!1},.3))}},updownAction:function(e,t){t.y+=this.reverseFlag?-2:2,t.y=cc.clampf(t.y,-200,200),-200!=t.y&&200!=t.y||(this.reverseFlag=!this.reverseFlag)},leftrightAction:function(e,t){t.x+=this.reverseFlag?-2:2,t.x=cc.clampf(t.x,-200,200),-200!=t.x&&200!=t.x||(this.reverseFlag=!this.reverseFlag)},leftSkewAction:function(e,t){var n=cc.p(200,200),a=cc.pNeg(n),i=cc.v2(2,2),o=t.getPosition();this.reverseFlag?cc.pSubIn(o,i):cc.pAddIn(o,i),o=cc.pClamp(o,a,n),t.setPosition(o),(cc.pointEqualToPoint(o,n)||cc.pointEqualToPoint(o,a))&&(this.reverseFlag=!this.reverseFlag)},rightSkewAction:function(e,t){var n=cc.p(-200,200),a=cc.pNeg(n),i=cc.v2(-2,2),o=t.getPosition();this.reverseFlag?cc.pSubIn(o,i):cc.pAddIn(o,i),o=cc.pClamp(o,a,n),t.setPosition(o),(cc.pointEqualToPoint(o,n)||cc.pointEqualToPoint(o,a))&&(this.reverseFlag=!this.reverseFlag)},squareAction:function(e,t){var n=200,a=t.getPosition();a.y==n&&a.x!=-n?a.x-=2:a.x==-n&&a.y!=-n?a.y-=2:a.y==-n&&a.x!=n?a.x+=2:a.x==n&&a.y!=n&&(a.y+=2),a.x=cc.clampf(a.x,-n,n),a.y=cc.clampf(a.y,-n,n),t.setPosition(a)},triangleAction:function(e,t){var n=cc.p(0,300*Math.sin(Math.PI/3)-100),a=cc.p(-150,-100),i=cc.p(150,-100),o=Math.sqrt(8),c=t.getPosition();c.y==a.y&&c.x<i.x?c.x+=o:c.y>=a.y&&0<c.x&&c.x<=i.x?c=cc.pAdd(c,cc.v2(-2,2)):c.y>a.y&&c.x<=0&&c.x>=a.x&&(c=cc.pAdd(c,cc.v2(-2,-2))),c.x=cc.clampf(c.x,a.x,i.x),c.y=cc.clampf(c.y,a.y,n.y),t.setPosition(c)},invertedTriangleAction:function(e,t){var n=cc.p(0,-300*Math.sin(Math.PI/3)+50),a=cc.p(-150,50),i=cc.p(150,50),o=Math.sqrt(8),c=t.getPosition();c.y==a.y&&c.x<i.x?c.x+=o:c.y<=a.y&&0<c.x&&c.x<=i.x?c=cc.pAdd(c,cc.v2(-2,-2)):c.y<a.y&&c.x<=0&&c.x>=a.x&&(c=cc.pAdd(c,cc.v2(-2,2))),c.x=cc.clampf(c.x,a.x,i.x),c.y=cc.clampf(c.y,a.y,n.y),t.setPosition(c)},diamondAction:function(e,t){var n=t.getPosition();0<=n.y&&n.x<=0?n=cc.pAdd(n,cc.v2(-2,-2)):n.y<0&&n.x<=0?n=cc.pAdd(n,cc.v2(2,-2)):n.y<0&&0<n.x?n=cc.pAdd(n,cc.v2(2,2)):0<=n.y&&0<n.x&&(n=cc.pAdd(n,cc.v2(-2,2))),n.x=cc.clampf(n.x,-200,200),n.y=cc.clampf(n.y,-200,200),t.setPosition(n)},reverseDiamondAction:function(e,t){var n=t.getPosition();0<=n.y&&n.x<=0?n=cc.pAdd(n,cc.v2(2,2)):n.y<0&&n.x<=0?n=cc.pAdd(n,cc.v2(-2,2)):n.y<0&&0<n.x?n=cc.pAdd(n,cc.v2(-2,-2)):0<=n.y&&0<n.x&&(n=cc.pAdd(n,cc.v2(2,-2))),n.x=cc.clampf(n.x,-200,200),n.y=cc.clampf(n.y,-200,200),t.setPosition(n)},circleAction:function(e,t){this.angle+=2*e,this.angle>2*Math.PI&&(this.angle-=2*Math.PI);var n=100*Math.cos(this.angle)+0,a=100*Math.sin(this.angle)+0;t.x=n,t.y=a},ellipseUdAction:function(e,t){this.angle+=2*e,this.angle>2*Math.PI&&(this.angle-=2*Math.PI);var n=80*Math.cos(this.angle),a=180*Math.sin(this.angle);t.x=n,t.y=a},ellipseLrAction:function(e,t){this.angle+=2*e,this.angle>2*Math.PI&&(this.angle-=2*Math.PI);var n=180*Math.cos(this.angle),a=80*Math.sin(this.angle);t.x=n,t.y=a},pendulumAction:function(e,t){this.angle+=this.reverseFlag?2*e:-2*e,this.angle=cc.clampf(this.angle,this.minAngle,this.maxAngle),(this.angle<=this.minAngle||this.angle>=this.maxAngle)&&(this.reverseFlag=!this.reverseFlag);var n=200*Math.cos(this.angle)+0,a=200*Math.sin(this.angle)+120;t.x=n,t.y=a},spiralAction:function(e,t){var n=1*(1+this.t),a=n*Math.cos(this.angle),i=n*Math.sin(this.angle);t.x=a,t.y=i;this.reverseFlag?(this.t+=1,this.angle+=2*e):(this.t-=1,this.angle-=2*e),(300<=this.t||this.t<=0)&&(this.reverseFlag=!this.reverseFlag)},spiralShadowAction:function(e,t){var n=10*(1+this.t),a=n*Math.cos(360*this.t),i=n*Math.sin(360*this.t);t.x=a,t.y=i,this.reverseFlag?this.t+=1:this.t-=1,(100<=this.t||this.t<=0)&&(this.reverseFlag=!this.reverseFlag)}}),cc._RF.pop()},{global:"global"}],test:[function(e,t,n){"use strict";cc._RF.push(t,"fc05cTrHp1BZbnUHypIMa0N","test"),cc.Class({extends:cc.Component,properties:{target:cc.Node,pos:cc.Label,cocosText:cc.Label,h5MotionText:cc.Label,h5OrientationText:cc.Label,precision:0},onLoad:function(){var e=cc.view.getVisibleSize();this._range={x:0,y:0},this._range.x=e.width/2-this.target.width/2,this._range.y=e.height/2-this.target.height/2,this._acc={x:0,y:0},this.speed=200,this.adjust={x:.2,y:.1},this.vx0=0,this.px0=0,this.ax0=0,this.a0={x:0,y:0,z:0},this.v0={x:0,y:0,z:0},this.p0={x:0,y:0,z:0},this.t=0,cc.systemEvent.setAccelerometerEnabled(!0),cc.systemEvent.on(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this),this.testH5MotionEvent3()},start:function(){},update:function(e){},onDestroy:function(){cc.systemEvent.setAccelerometerEnabled(!1),cc.systemEvent.off(cc.SystemEvent.EventType.DEVICEMOTION,this.onDeviceMotionEvent,this)},onDeviceMotionEvent:function(e){this.acc=e.acc;e.acc.x},testH5MotionEvent:function(){var h=this;window.addEventListener("devicemotion",function(e){var t=function(e){return h.round(e,h.precision)},n=e.acceleration,a=e.accelerationIncludingGravity,i=e.rotationRate;h.u=h.getU(a,n),h.rate=i;var o="H5 Motion\n属性\tx(beta)\ty(gamma)\tz(alpha)\n用户加速度\t"+t(n.x)+"\t"+t(n.y)+"\t"+t(n.z)+"\n加速度总和\t"+t(a.x)+"\t"+t(a.y)+"\t"+t(a.z)+"\n旋转速率\t"+t(i.gamma)+"\t"+t(i.beta)+"\t"+t(i.alpha)+"\n重力加速度\t"+t(h.u.x)+"\t"+t(h.u.y)+"\t"+t(h.u.z);if(h.h5MotionText.string=o,h.adjust){var c=e.acceleration,s=e.interval/1e3;.2<Math.abs(c.x)&&(h.target.x+=c.x*s*(s+200),h.pos.string="ax="+t(c.x)+", ay="+t(c.y)+"\np("+t(h.target.x)+", "+t(h.target.y)+")");var r=e.acceleration.x,l=h.vx0+h.ax0+(r-h.ax0>>1),u=h.px0+h.vx0+(l-h.vx0>>1);.1<Math.abs(r)&&cc.log(h.r3(r)),h.ax0=r,h.vx0=l,h.px0=u}else h.adjust=e.acceleration},!0)},testH5MotionEvent2:function(){var s=this;window.addEventListener("devicemotion",function(e){var t=function(e){return s.round(e,s.precision)},n=e.interval/1e3,a=e.acceleration,i={x:0,y:0,z:0},o={x:0,y:0,z:0};if(.0618<Math.abs(a.x)){var c=s.round(a.x*n,4);.001<Math.abs(c)&&(i.x=s.v0.x+c,s.v0.x=i.x,cc.log("ax="+s.round(a.x,4),"dt="+n,"Δv="+c,"vx="+s.round(s.v0.x,4)))}.1<Math.abs(a.y)?(0<s.v0.y?s.target.y+=1:s.v0.y<0&&(s.target.y-=1),i.y=s.v0.y+a.y*n,s.v0.y=i.y):s.v0.y=0,.1<Math.abs(a.z)&&(i.z=s.v0.z+a.z*n,o.z=s.p0.z+i.z*n,s.v0.z=i.z,s.p0.z=o.z),s.pos.string="dt="+t(n)+"\na("+t(a.x)+", "+t(a.y)+", "+t(a.z)+")\nv("+t(s.v0.x)+", "+t(s.v0.y)+", "+t(s.v0.z)+")\np("+t(s.p0.x)+", "+t(s.p0.y)+", "+t(s.p0.z)+")"},!0)},testH5MotionEvent3:function(){var s=this;window.addEventListener("devicemotion",function(e){var t=e.interval/1e3,n=e.acceleration,a=s.target,i=s._range;if(.2<Math.abs(n.x)){s.t=0;var o=s.round(n.x*t,4);.001<Math.abs(o)&&(s.v0.x=s.v0.x+o,.0618<s.v0.x?s.target.x+=1:s.v0.x<-.0618&&(s.target.x-=1),a.x=cc.clampf(a.x,-i.x,i.x))}else s.t+=t,.2<s.t&&0!=s.v0.x&&(s.t=0,s.v0.x=0);if(.2<Math.abs(n.y)){s.ty=0;var c=s.round(n.y*t,4);.001<Math.abs(c)&&(s.v0.y=s.v0.y+c,cc.log("ay="+s.round(n.y,4),"dt="+t,"Δv="+c,"vy="+s.round(s.v0.y,4)),.0618<s.v0.y?s.target.y+=1:s.v0.y<-.0618&&(s.target.y-=1),a.y=cc.clampf(a.y,-i.y,i.y))}else s.ty+=t,.2<s.ty&&0!=s.v0.y&&(s.ty=0,s.v0.y=0,cc.log("ay="+s.round(n.y,4),"ty="+s.ty,"vy="+s.round(s.v0.y,4)))},!0)},testH5OrientationEvent:function(){var s=this;window.addEventListener("deviceorientation",function(e){var t=function(e){return s.round(e,s.precision)},n=e.absolute,a=e.beta,i=e.gamma,o=e.alpha,c="H5 Orientation\nabs="+n+"\nx="+t(a)+"\ny="+t(i)+"\nz="+t(o);s.h5OrientationText.string=c,0<a-s.ox?s.target.x+=1:a-s.ox<0&&(s.target.x-=1),s.ox=a,0<i-s.oy?s.target.y+=1:i-s.oy<0&&(s.target.y-=1),s.oy=i},!0)},r3:function(e){return Math.round(1e3*e)/1e3},round:function(e,t){if(0==t)return Math.round(e);var n=Math.pow(10,t);return Math.round(e*n)/n},getU:function(e,t){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}}}),cc._RF.pop()},{}],"wx-share":[function(e,t,n){"use strict";cc._RF.push(t,"f2948SMd7tKeaipQp6GC3TH","wx-share");var a=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();var i="http://pd.xinhua-news.cn/xhweixin/jsapi.do?&mpId=1",o={title:document.title,desc:"",link:location.href.split("?")[0],imgUrl:"",success:function(){},cancel:function(){}},c=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.getSignature()}return a(e,[{key:"getSignature",value:function(){var t=this,e=location.href.split("#")[0];$.ajax({type:"GET",url:i,data:{url:e},dataType:"jsonp",success:function(e){200===e.code?t.run(e.content):alert(e.errMsg||"出错啦")},error:function(){}})}},{key:"run",value:function(e){var t=e.appId,n=e.timestamp,a=e.nonceStr,i=e.signature;wx.config({debug:!1,appId:t,timestamp:n,nonceStr:a,signature:i,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ"]}),wx.ready(function(){wx.onMenuShareTimeline(o),wx.onMenuShareAppMessage(o)})}}],[{key:"updateOpt",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).forEach(function(e){return o[e]=t[e]}),o}}]),e}();t.exports=c,cc._RF.pop()},{}]},{},["Net","change","event","global","index","rank","ring","shoot","sightBead","target","test","wx-share"]);